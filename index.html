<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Video Tutorial Screen</title>
    <link href="css/skidos.css" rel="stylesheet" />

    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/font-awesome.css" />
    <link rel="stylesheet" href="css/plyr.css" />

    <link rel="stylesheet" href="css/styles.css" />

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <div class="close-btn-area jsCloseBtn">
      <button class="tutorial-close-btn"></button>
    </div>
    <div class="player-container active">
      <div class="player">
        <div class="video-block">
          <video id="skidos_player" controls crossorigin playsinline></video>
        </div>
      </div>
    </div>

    <script src="js/font-awesome.js"></script>
    <script src="js/polyfill.min.js"></script>
    <script src="js/plyr.min.js"></script>
    <script src="js/hls.js"></script>

    <script>
      const sandbox = true;
      const unityMode = true;
      let preDuration = null;
      let videoLoadInterval;
      let videoEndInterval;
      let isVideoEnded = false;
      const video = document.querySelector("#skidos_player");

      const controls = [];
      const player = new Plyr(video, {
        autoplay: true,
        displayDuration: true,
        controls,
        fullscreen: { enabled: false },
        ratio: "16:9",
      });

      onloadFunctions();
      function onloadFunctions() {
        setTimeout(function () {
          window.location.href =
            "skidoswebview://PlayingVideoTutorial?EventName=learning_tutorial_playback_started&webmodule=tutorialvideo";
        }, 700);
        player.play();
        player.muted = false;
      }
      /* ... code ... */
      player.on("ended", function () {
        console.log("video ended");
        isVideoEnded = true;
        window.location.href =
          "skidoswebview://VideoTutorialEnded?EventName=learning_tutorial_playback_completed&webmodule=tutorialvideo";
      });
      $(".jsCloseBtn").click(function () {
        window.location.href =
          "skidoswebview://VideoTutorialEnded?EventName=LearningTutorialCrossBtnClk&closebtn=true&webmodule=tutorialvideo";
      });
      //unity-video - bridge;
    </script>
    <script src="js/sandbox.js"></script>
    <script src="js/scripts.js"></script>
  </body>
</html>
